{"version":3,"sources":["App.js","index.js"],"names":["BorderLinearProgress","withStyles","root","height","backgroundColor","lighten","bar","borderRadius","LinearProgress","App","props","state","pictures","results","completed","k","handleSearchSubmit","bind","handleFormChange","handleKChange","event","console","log","this","searchText","undefined","setState","myInit","query","axios","post","window","dataiku","getWebAppBackendUrl","then","response","data","images","map","elem","picture","img","cols","catch","error","result","presigned_url","description","preventDefault","target","value","classes","className","Grid","container","justify","alignItems","spacing","xs","item","Typography","variant","style","textAlign","Paper","paper","FormControl","formControl","Select","labelId","id","onChange","MenuItem","noValidate","autoComplete","onSubmit","Input","width","placeholder","margin","endAdornment","InputAdornment","position","Button","type","background","paper2","color","GridList","cellHeight","tile","GridListTile","key","src","alt","dangerouslySetInnerHTML","htmlString","__html","React","Component","theme","flexGrow","padding","palette","text","secondary","em","withTheme","document","addEventListener","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.50f08fa8.chunk.js","sourcesContent":["import React from 'react';\nimport './App.css';\nimport 'typeface-roboto';\nimport { Button, Input, FormControl, Select, MenuItem } from '@material-ui/core';\nimport { withStyles, lighten } from \"@material-ui/core/styles\";\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Typography from '@material-ui/core/Typography';\nimport axios from 'axios';\n\n//axios.defaults.baseURL = 'http://localhost:11800/public-cors/api/v1/fashion-search';\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    height: \"100%\",\n    color: theme.palette.text.secondary\n  },\n  paper2: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary\n  },\n  em: {\n    backgroundColor: \"#f18973\"\n  }\n});\n\nconst BorderLinearProgress = withStyles({\n  root: {\n    height: 10,\n    backgroundColor: lighten('#ff6c5c', 0.5),\n  },\n  bar: {\n    borderRadius: 20,\n    backgroundColor: '#ff6c5c',\n  },\n})(LinearProgress);\n\n// const classes = useStyles();\n\nclass App extends React.Component {\n  \n  constructor(props) {\n    super(props);\n    this.state = {\n      pictures: [],\n      results: [],\n      completed:0,\n      k:3\n    };\n    this.handleSearchSubmit = this.handleSearchSubmit.bind(this);\n    this.handleFormChange = this.handleFormChange.bind(this);\n    this.handleKChange = this.handleKChange.bind(this);\n  }\n\n  handleSearchSubmit(event) {\n    // function for when a use submits a URL\n    // if the URL bar is empty, it will remove similar photos from state\n    console.log(this.state.searchText);\n    if (this.state.searchText === undefined || this.state.searchText === \"\") {\n      console.log(\"Empty Text field\");\n      this.setState({pictures: [], completed: 0, results: []});\n    } else {\n      const myInit = {query: this.state.searchText, k: this.state.k};\n\n      this.setState({completed:66});\n\n      //axios.post('/semantic_search/run', myInit)\n      axios.post(window.dataiku.getWebAppBackendUrl('semantic_search'), myInit)\n        .then(response => {\n          //console.log(response);\n          this.setState({pictures: response.data.images.map(function(elem) {\n            let picture = {};\n            picture.img = elem;\n            picture.cols = 1;\n            return picture;\n          })\n        });\n        console.log(this.state.pictures);\n        })\n        .catch(error => {\n          console.log(error);\n        });      \n\n      this.setState({completed:85});\n\n      console.log(this.state.results);\n\n      //axios.post('http://localhost:11800/public-cors/api/v1/fashion-search/es_match/run', myInit)\n      axios.post(window.dataiku.getWebAppBackendUrl('es_match'), myInit)\n        .then(response => {\n          this.setState({results: response.data.map(function(elem) {\n            let result = {};\n            result.img = elem.presigned_url;\n            result.cols = 1;\n            result.description = elem.description;\n            return result;\n          })\n        });\n        console.log(this.state.results);\n        this.setState({completed:100});\n        })\n        .catch(error => {\n          console.log(error);\n        });      \n    };\n    event.preventDefault();\n  }\n\n  handleFormChange(event) {\n    this.setState({searchText: event.target.value});\n  }\n\n  handleKChange(event) {\n    this.setState({k: event.target.value});\n  }\n\n  render() {\n    const { classes } = this.props;\n    const createMarkup = htmlString => ({ __html: htmlString });\n\n    return (\n      <div className={classes.root}>\n\n        <Grid container justify='center' alignItems=\"stretch\" spacing={8} xs={12}>\n          {/* <Grid item xs={10}>\n            <img src={require('./images/header.jpg')} alt=\"Header\" style={{height:\"100%\", width: \"100%\"}}/>\n          </Grid> */}\n          <Grid item xs={10}>\n            <Typography variant=\"h2\" style={{textAlign: \"center\"}}>\n              Dataiku Natural Language Search\n            </Typography>\n          </Grid>\n          <Grid item xs={10}>\n            <Paper className={classes.paper}>\n              <Typography variant=\"h5\">Step 1: Select the number of similar products (K neighbors):</Typography>\n              <p/>\n              <FormControl className={classes.formControl}>\n                <Select\n                  labelId=\"demo-simple-select-label\"\n                  id=\"demo-simple-select\"\n                  value={this.state.k}\n                  onChange={this.handleKChange}\n                >\n                  <MenuItem value={3}>Three</MenuItem>\n                  <MenuItem value={4}>Four</MenuItem>\n                  <MenuItem value={5}>Five</MenuItem>\n                  <MenuItem value={6}>Six</MenuItem>\n                </Select>\n              </FormControl>\n            </Paper>\n          </Grid>\n\n          <Grid item xs={10}>\n            <Paper className={classes.paper}>\n            <Typography variant=\"h5\">Step 2: Enter a natural language search query about dresses. Try entering \"I want a summery dress that's flowery and yellow\": </Typography>\n            <p/>\n              <form noValidate autoComplete=\"off\" onSubmit={this.handleSearchSubmit}>\n                <Input\n                  style={{width:'80%'}}\n                  placeholder=\"Search\"\n                  onChange={this.handleFormChange}\n                  value={this.state.searchText}\n                  id=\"standard-basic\"\n                  margin=\"dense\"\n                  width={1200}\n                  // fullWidth\n                  endAdornment={\n                    <InputAdornment position=\"end\">\n                      <SearchIcon />\n                    </InputAdornment>\n                  }\n                />\n                <Button\n                type='submit'\n                style={{background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)'}}\n                >\n                  Submit\n                </Button>\n              </form>\n            </Paper>\n          </Grid>\n\n          \n          <Grid item xs={10}>\n              <Paper className={classes.paper2}>\n                <Typography variant=\"h5\">Step 3: Results!</Typography>\n                <p/>\n                  <BorderLinearProgress\n                      variant=\"determinate\"\n                      color=\"secondary\"\n                      value={this.state.completed}\n                  />\n                <p/>\n              </Paper>\n              <p/>\n              <Paper className={classes.paper2}>\n                <Typography variant=\"h6\">KNN Search</Typography>\n                <GridList cellHeight={200} cols={3}>\n                  {this.state.pictures.map((tile) => (\n                    <GridListTile key={tile.img} cols={tile.cols || 1}>\n                      <img src={tile.img} alt=\"Similar products...\" style={{height:\"200px\", width: \"auto\"}} />\n                    </GridListTile>\n                  ))}\n                </GridList>\n              </Paper>\n              <p/>\n              <Paper className={classes.paper2}>\n                <Typography variant=\"h6\">Elasticsearch <span style={{ backgroundColor:\"#f18973\"}} >Match</span> Search</Typography>\n                  <GridList cellHeight={450} cols={3}>\n                    {this.state.results.map((tile) => (\n                      <Grid item xs={4}>\n                        <img src={tile.img} alt=\"Similar products...\" style={{height:\"200px\", width: \"auto\"}} />\n                        <Typography>\n                          <p dangerouslySetInnerHTML={createMarkup(tile.description)} />\n                        </Typography>\n                      </Grid>\n                    ))}\n                  </GridList>\n              </Paper>\n            </Grid>\n        </Grid>\n      </div>\n  );}\n}\n\nexport default withStyles(styles, { withTheme: true })(App);\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\ndocument.addEventListener(\"DOMContentLoaded\", function(event) {\n  ReactDOM.render(\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n  );  \n})"],"sourceRoot":""}